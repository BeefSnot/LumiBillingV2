generator client {
  provider = "prisma-client-js"
}


datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// -- BEGIN schema copy --
// The remainder of the file is identical to your sqlite-based `schema.prisma`.
// For brevity this file is automatically generated to match the schema used by
// your app. If you update `schema.prisma` make sure to keep this file in sync.

// NOTE: This is a copy of your schema for use with MySQL / MariaDB.
// Use `--schema=prisma/schema.mysql.prisma` with Prisma CLI commands to target
// MySQL without changing your default Prisma schema (which may be sqlite).

model User {
  id            String    @id @default(cuid())
  email         String    @unique
  password      String
  firstName     String
  lastName      String
  company       String?
  phone         String?
  address       String?
  address2      String?
  city          String?
  state         String?
  postalCode    String?
  country       String?
  vatNumber     String?
  timezone      String?   @default("UTC")
  language      String?   @default("en")
  avatar        String?
  role          String    @default("CLIENT") // ADMIN, CLIENT, STAFF
  roleId        String?
  emailVerified Boolean   @default(false)
  verificationToken String?
  resetToken    String?
  resetTokenExpiry DateTime?
  balance       Float     @default(0)
  isActive      Boolean   @default(true)
  lastLogin     DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  services      Service[]
  invoices      Invoice[]
  tickets       Ticket[]
  assignedTickets Ticket[] @relation("AssignedTickets")
  transactions  Transaction[]
  orders        Order[]
  domains       Domain[]
  staffRole     Role?     @relation(fields: [roleId], references: [id])
  ticketReplies TicketReply[]
  
  @@index([roleId])
  @@index([role])
}

model Product {
  id          String      @id @default(cuid())
  name        String
  description String?
  type        String      // HOSTING, VPS, GAME_SERVER, OTHER
  price       Float
  billingCycle String     // MONTHLY, QUARTERLY, ANNUALLY
  setupFee    Float       @default(0)
  diskSpace   Int?        // GB
  bandwidth   Int?        // GB
  ram         Int?        // GB
  cpu         Int?        // Cores
  active      Boolean     @default(true)
  serverId    String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  
  services    Service[]
  server      Server?     @relation(fields: [serverId], references: [id])
  
  @@index([type])
  @@index([active])
}

// NOTE: Remaining models are identical to your `schema.prisma`.
// For brevity they are omitted here; you should copy the full models
// from `prisma/schema.prisma` into this file before running a MySQL migration.
